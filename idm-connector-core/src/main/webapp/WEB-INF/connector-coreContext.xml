<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    					http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
    					http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
    					http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.5.xsd">

	<!-- Authentication Beans -->
	<bean id="iamConnector" class="org.openiam.spml2.spi.iam.IAMComplete">
	
	</bean>

	<bean id="ldapConnector" class="org.openiam.spml2.spi.ldap.LdapSpmlComplete">
	
	</bean>

	<!-- ========================= RESOURCE DEFINITIONS ========================= -->

	<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
	    <property name="locations">
	        <value>classpath:datasource.properties</value>
	    </property>
	</bean>
	
	

  
	<!-- Local DataSource that works in any environment -->
	<!-- Note that DriverManagerDataSource does not pool; it is not intended for production -->
	<!-- See JPetStore for an example of using Commons DBCP BasicDataSource as alternative -->
	<!-- See Image Database for an example of using C3P0 ComboPooledDataSource as alternative -->

     <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${openiam.driver_classname}" />
        <property name="url" value="${openiam.driver_url}" />
        <property name="username" value="${openiam.username}" />
        <property name="password" value="${openiam.password}" />
     </bean>



  <tx:advice id="txAdvice" transaction-manager="transactionManager">
    <!-- the transactional semantics... -->
    <tx:attributes>
      <!-- all methods starting with 'get' are read-only -->
      <tx:method name="get*" read-only="true" propagation="SUPPORTS" />
      <!-- other methods use the default transaction settings (see below) -->
      <tx:method name="*" propagation="REQUIRED"/>
      <tx:method name="send*" read-only="true" propagation="NOT_SUPPORTED" />
    </tx:attributes>
  </tx:advice>
  
  

  <!-- ensure that the above transactional advice runs for any execution
      of an operation defined by the FooService interface -->
<!-- 
  <aop:config>
    <aop:pointcut id="serviceOperation" expression="execution(* org.openiam.idm.srvc.service.service.ServiceMgr.*(..))"/>
    <aop:advisor advice-ref="txAdvice" pointcut-ref="serviceOperation"/>
  </aop:config>
-->
 
      
</beans>

