<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    					http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
    					http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">


 	
     
     <!--  Reports  -->
 
     <bean id="nameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
     
     
     <!-- Method name resolver for Audit Reports  -->
	<bean id="methodNameResolver" class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
		<property name="paramName" value="method" />
  		<property name="methodParamNames">
  			<list>
  				<value>view</value>
  				<value>pswd</value>
  			</list>
  		</property>
  		<property name="logicalMappings">
  			<props>
  				<prop key="view">auditReport</prop>
  				<prop key="pswd">passwordChangeReport</prop>
  			</props>
  		</property>
	</bean>

     <!-- Method name resolver for Audit Reports  -->
	<bean id="accessRptMethodNameResolver" class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
		<property name="paramName" value="method" />
  		<property name="methodParamNames">
  			<list>
  				<value>allRole</value>
  			</list>
  		</property>
  		<property name="logicalMappings">
  			<props>
  				<prop key="allRole">allRolesReport</prop>
  			</props>
  		</property>
	</bean>

 <!--  Report Controllers -->
	<bean id="auditReportController" class="org.openiam.webadmin.rpt.AuditReportController">
		    <property name="methodNameResolver" ref="methodNameResolver"/>
		    <property name="auditService" ref="auditDataService" />
	</bean>

	<bean id="accessReportController" class="org.openiam.webadmin.rpt.AccessReportController">
		    <property name="methodNameResolver" ref="accessRptMethodNameResolver"/>
		    <property name="roleDataService" ref="roleDataService" />
	</bean>
 
 <!-- Report view definiations -->
 
 <bean id="auditMultiFormatReport" class="org.springframework.web.servlet.view.jasperreports.JasperReportsMultiFormatView">
    <property name="contentDispositionMappings">
        <props>
            <prop key="html">inline; filename=report.html</prop>
            <prop key="csv">inline; filename=report.csv</prop>
            <prop key="pdf">inline; filename=report.pdf</prop>
            <prop key="xls">inline; filename=report.xls</prop>
        </props>
    </property>
    <property name="url" value="/report/general_audit.jrxml" />
</bean>
  
 <bean id="passwordMultiFormatReport" class="org.springframework.web.servlet.view.jasperreports.JasperReportsMultiFormatView">
    <property name="contentDispositionMappings">
        <props>
            <prop key="html">inline; filename=report.html</prop>
            <prop key="csv">inline; filename=report.csv</prop>
            <prop key="pdf">inline; filename=report.pdf</prop>
            <prop key="xls">inline; filename=report.xls</prop>
        </props>
    </property>
    <property name="url" value="/report/password_change.jrxml" />
 </bean>
 
  <bean id="rolesMultiFormatReport" class="org.springframework.web.servlet.view.jasperreports.JasperReportsMultiFormatView">
    <property name="contentDispositionMappings">
        <props>
            <prop key="html">inline; filename=report.html</prop>
            <prop key="pdf">inline; filename=report.pdf</prop>
        </props>
    </property>
    <property name="url" value="/report/roles.jrxml" />
 </bean>    
      
     
     <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    		<property name="mappings">
    			<props>
    				<prop key="/auditReport.report">auditReportController</prop>
					<prop key="/passwordChangeReport.report">auditReportController</prop>
					<prop key="/allRolesReport.report">accessReportController</prop>
    			</props>
    		</property>
    	</bean>
    	

    
	
</beans>



